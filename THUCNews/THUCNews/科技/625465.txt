移动IP解决互联网移动计算难题
　　作者：中国联通周口分公司副总经理 李伟
　　作为3G标准之一，CDMA2000分组网络结构建立在传统IP技术基础上，其为全IP网络建设提供的新思路和途径，日益受到业内人士的广泛关注。
　　从20世纪90年代中期开始，我国的GSM和CDMA话音用户数和业务量得到迅猛的增长。伴随着Internet的快速发展和人们之间信息交流的加强，人们对移动通信的需求已不再局限于话音业务，以“彩e”、“UNI”为代表的众多移动数据业务和移动多媒体业务已经逐步走进人们的生活，并表现出广阔的发展前景。
　　CDMA20001x系统的引入
　　从当前移动通信的发展来看，随着话音业务逐渐趋于饱和，人们开始考虑如何将丰富多彩的IP数据业务引入蜂窝移动通信网中。CDMA2000是第三代移动通信系统的主流标准之一，在空中接口上，CDMA2000系统能够在1.25MHz带宽上提供高达304kbps的高速分组数据业务。CDMA20001X是CDMA2000的第一段，介于第二代(IS-95)和第三代之间的一种技术。在原来IS-95A系统基础上通过软件升级和添加一些必要的硬件可以实现CDMA20001XRTT新标准和新业务，平滑地向第三代过渡。相对于IS-95A型CDMA网络，CDMA2000lx除了在无线部分空中接口方面改进以外，在核心网部分还引入了分组域的概念，增加了分组控制单元(PCF)、分组数据业务节点(PDSN)、AAA(认证、授权、计费)服务器和HA(归属代理，用于移动IP业务)等功能单元，采用了基于移动IP技术的分组网络结构，为用户提供诸如WWW浏览、E-mail、高速数据下载、视频点播(VOD)、网上游戏等丰富多彩的互联网业务。
　　中国联通作为国内第二大移动通信运营商，在CDMA无线数据业务发展中，拥有较强的技术优势和资源优势，在国内率先开通CDMA20001X网络服务，一方面加大无线接入网络的覆盖范围，努力构建无缝精品网络，为将来向3G平滑过渡提供可靠的无线承载平台；另一方面将CDMA增值业务的发展重心向CDMA20001X数据业务倾斜，希望将技术优势转化为业务优势，在移动数据业务市场中形成差异化的竞争。
　　移动IP的工作机制
　　移动IP是IETF(Internet　Engineering　Task　Force)移动IP工作组提出的一套新的IP路由机制和协议，是为解决Internet中节点的移动性而引入的网络层协议，是IP协议族中的一个组成部分。移动IP目的是为Internet提供移动计算功能，满足网络节点在位置移动的同时，保持正在进行通信过程而不需要重新启动和IP参数的重新配置，并能够随时随地从网上获取数据、共享网络资源和服务。
　　在移动IP中定义了3种功能实体：
　　移动主机(Mobile　Host)：移动IP协议中每个移动主机在家乡链路(Home　Link)上有一个唯一的家乡地址，当它漫游到外地网络时，将获得一个临时的转交地址(Car　Of　Address)。移动主机可以将接入Internet的位置从一条链路切换到另一条链路上，仍保持正在进行的通信。
　　家乡代理(Home　Agent)：是一台与移动主机家乡网络相连的路由器，也称归属代理。当移动主机位置切换时，HA负责维护移动主机当前位置信息，处理和响应移动主机注册请求消息。
　　外地代理(Foreign　Agent)：是移动主机所在外地链路上的一台路由器。一方面为移动主机提供转交地址，帮助移动主机将转交地址通知家乡代理，另一方面可以帮助转发来自家乡代理的数据包。FA还可以作为连在外地链路上移动主机的缺省路由器(Default　Router)。
　　移动IP协议的基本思想：
　　(1)家乡代理和外地代理周期性地广播或组播代理广播消息，宣告它们的存在以及与链路连接的关系。
　　(2)移动主机收到代理广播消息后，检查其中字段的内容确定自己位置是否移动。
　　(3)若移动主机确定仍连在家乡网络上，则与固定节点一样工作，即不利用移动IP的功能；若得知已经移动到外地网络，连接在一条外地链路上时，移动主机则需要一个转交地址。转交地址的获得可通过代理发现(AgentDiscovery)或自动主机配置协议(DHCP)完成。
　　(4)移动主机通过移动IP定义的消息向家乡代理注册转交地址。为防止拒绝服务攻击，注册消息要求安全认证。
　　(5)家乡代理或家乡网络上其他一些路由器定期广播移动主机家乡地址网络前缀的可达性，目的是吸引那些发往移动主机的数据包。如果数据包来自家乡网络的某个通信节点，则家乡代理将采用代理ARP(地址解析协议)技术获得数据包。当家乡代理截获数据包后，通过隧道技术将数据包传送到移动主机的当前转交地址。在转交地址处，由外地代理或移动主机的一个端口将原始数据包从隧道中提取出来送给移动主机。
　　(6)若从移动主机发送数据包至目的节点，可按照通常IP路由规则，直接选路。此时，外地代理完成移动主机缺省路由器的功能。
　　系统协议结构
　　在CDMA20001X系统中实现移动IP技术，为用户提供高速分组数据业务，不仅需要组建硬件网络结构，还需要相应协议软件的支持。
　　PCF和PDSN间的无线包数据R-P接口，属于A接口的一部分，又称A10和All，承载PPP(点到点)协议，完成无线信道和有线信道的协议转换。
　　RN包括基站控制器(BSC)、基站(BTS)和分组控制功能模块(PCF)，构成无线网络。
　　移动主机和无线网络(RN)的接口，即空中接口。由无线链路、MAC、LAC、PPP和IP层组成，其中MAC为媒体接入控制，主要完成各逻辑信道上多种业务的复用和QOS控制等功能；LAC为链路接入控制，主要功能是保证系统控制信令消息的正确传输；无线链路完成各种物理信道的处理，包括无线信道的数据编解码和调制解调等过程。MAC、LAC和空中接口组成无线信道。
　　从数据通信的角度来看，PDSN和HA具备路由器的功能。HA和PDSN间的通信协议是标准的TCP/IP协议，采用隧道技术保证数据的安全传输。根据移动IP的规定，隧道的终点可设置在移动主机，也可设置在外部代理(PDSN)，但在CDMA20001X系统将隧道的终点设置存PDSN(即外部代理)。这是因为隧道技术本身需要数据报的重新封装，从而增加传送的额外负荷，这对无线资源有限的无线信道来说是不利的，考虑到在无线信道编码过程中已采用可靠的加密算法，因而不需要使用隧道技术提供的安全手段。
　　在CDMA20001X系统中通过分组域网络结构的组建和协议的设置，为移动IP技术实现提供软硬件的支持。在CDMA2000lx系统中移动IP技术的实现步骤如下：
　　(1)在MS与PDSN之间通过A8/A9和A10/A11接口，建立一条点对点，PPP)链路。
　　(2)PDSN/FA通过PPP链路和BSS进行代理广播。
　　(3)MS收到代理广播消息之后确定目前所处位置。
　　(4)当MS确定已经漫游到外地网络中，则从外地网络获得一个临时的转交地址。
　　(5)在外地网络的MS用转交地址向HA进行注册。
　　(6)所有发送至MS的分组数据均被HA截获，然后通过隧道送至MS转交地址(PDSN)，在隧道终点解封，将分组数据送至MS。
　　(7)对于MS发出的分组数据可根据标准IP路由寻址，无需经过HA转发。
　　(8)一个PDSN可以通过多个PCF与多个无线接入网相连，当MS在同一个PDSN/FA内切换或漫游时，PDSN将相应切换至相应PCF，当MS存PDSN间切换时，首先切换物理信道，MS通过新物理信道建立新的PDSN。 


