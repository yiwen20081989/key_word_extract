Nvidia详解CUDA攻略：麦当劳式推广之道
　　记者 杨琳桦
　　全球可编程图形处理技术领袖Nvidia(Nasdaq：NVDA)正在走向新征程。
　　3年前，随着AMD收购ATI案落定，全球计算机图形硬件行业的战争结果已经明晰：作为唯一的独立图形硬件厂商幸存者，Nvidia正式奠基为该领域的皇帝。
　　与此同时，此前Nvidia与ATI，以及英特尔与AMD这两对分别对抗的表面平行竞争状态也发生了巨变：英特尔由此必须面对更强大的追赶者，而Nvidia，则似乎失去了角力对象。
　　但上述“波澜不惊”只是外人印象，当市场上没有实力相当的竞争对手时，最大竞争者就是自己。实际上， 这个总部位于硅谷中心区域圣克克拉San Tomas Expressway2701号的公司正在悄悄酝酿和执行着一场涉及行业巨变的战略——“通用并行处理架构‘CUDA’(Compute Unified Device Architecture)”。
　　CUDA于2008年横空出世，是Nvidia 在收购物理加速公司Ageia后耗费重金打造的科学运算秘密武器，能使显卡用于图像计算以外的目的。它预示着，Nvidia赖以起家的GUP正往多领域和更良性方向发展，但也同时意味，这个全球图形硬件巨头正进一步侵袭总部离其不远的传统CPU老大英特尔的领地。
　　5月22日下午，Nvidia接受了本报记者的独家专访。
　　“今年下半年开始，我们的重点是大力推广CUDA在全球范围内的合作，”据Nvidia“Tesla个人超级计算机部门”总经理Andy Walsh透露， 截至现在，全球范围内已有超过150所大学将CUDA列入教学课程，近1亿台的计算机能运行采用CUDA技术为基础的应用，其中，也包括中国市场。
　　像麦当劳一样推广
　　现在，当记者随便在硅谷的朋友聚会餐桌上，能发现一些刚毕业于美国高校、供职于大型科技公司的工程师们曾有过“CUDA经历”。
　　这也正涉及了Nvidia关于CUDA推广的一个重要思路，即与全球顶级研究机构和大学合作，“从下一代普及和培养”。
　　相对其它技术和标准，CUDA有免费和学习门槛低的优点，而这个类似“麦当劳”的推广策略，也能保证当这些“学生”离开学校进入企业时，CUDA不再是个陌生词汇。此外据Walsh透露，Nvidia已在全球范围内设立CUDA自由交流论坛。
　　那么，CUDA功效如何？从技术层面说，传统CPU有一个核心，可以很快运行一个程序。但自人类进入多核时代后，更多内核并不意味可以把一个简单的程序运行得更快，因为一个程序仍只能运行在一个核上；另一方面，程序员要编写能够在多个核上运行的程序非常难。
　　CUDA能实现的是──在其架构下，程序员可以很容易编写程序运行在许多核心上。“通过CUDA，这些程序可以在Nvidia的数百个GPU内核中运转，运行速度比英特尔最快的CPU还要快10倍至100倍。”Walsh说。
　　最重要的， 该技术还适用于超级计算机，拥有最多960个并行处理核心的“Nvidia Tesla”是Nvidia的个人超级计算机品牌，可以让用户在桌面上体验群集级计算性能──最高比标准PC及工作站快250倍。
　　Nvidia GPU计算业务部门总经理Andy Keane告诉记者，Nvidia所以推出CUDA并在评估风险后愿将其大规模推广，首先是基于技术的发展。
　　GPU功能已越来越强大，计算上甚至已经超过通用CPU，如此强大的芯片如果只是作为显卡过于浪费；而对企业运作状态良好、在市场份额上占有绝对优势的Nvidia来说，目前非常重要的是──为GPU寻找到一个面向未来的更广泛的用途和空间，否则即便是其单GPU霸主GTX280也只能靠降价来增加市场份额。
　　这也正是Nvidia推出并大力推广CUDA的真正目的。
　　Walsh透露，今年是CUDA至关重要的一年，因为随全球推广的加速，软件开发方面正有越来越多客户针对CUDA平台发展各种应用，这也意味着，CUDA的引入，的确正将Nvidia带入新商业空间——越来越多Nvidia的GPU正在人类生命科学、石油、医疗、卫星等多个高性能计算领域发挥作用。
　　“GPU”缔造者的下一步
　　目前，Nvidia员工约为5400人左右，CUDA虽未设立单独的部门，但涉及该业务的员工已超过公司总人数的1/5。
　　Nvidia是全球最早提出“GPU”概念的公司。
　　GPU由Nvidia在1999年推出， 是相对于CPU的一个概念。由于现代计算机中(尤其是家用系统、游戏发烧友)图形处理器变得越来越重要，计算机行业开始需要一个专门的图形核心处理器。
　　1995年，在一些风投表示再作一个VGA Adaptor公司意义不大的情况下， Nvidia坚持推出了第一款显卡产品NV1。
　　这款产品在3D图形娱乐行业开始之初即表现了不拘传统的风格，并相当有野心想成为全方位PC平台娱乐霸主，不过，由于性能上不具备比竞争对手太多的优势，且还欲自立标准摒弃业内通用的三角形描绘3D建模而转用四边形，与OpenGL及D3D均不兼容，NV1销量不是很好，Nvidia也为此处境艰难，一度运营资金仅能维持30天运转。
　　1996年时，因NV1同时集成声卡功能，日本世嘉给了Nvidia一个订单，希望后者能为其设计一个类似芯片，虽然后来世嘉意识到该计划不可行中途取消了订单，但钱还是照付了。
　　然而此时，全球PC图形硬件市场也已是战国时代，以研发芯片为主的厂商包括有ATI、3dfx、3Dlabs、Rendition、S3、Cirrus Logic、Trident等，新贵3dfx甚至已抓住机遇成为PC 3D娱乐的新领袖，于1995年发布第一个产品Voodoo，并赢得广泛欢迎 。
　　硅谷的商业环境相对单纯，科技公司的胜负与否很大程度取决于技术实力。1997年底，AGP作为PC平台显卡接口出现在主板上，专为应付对宽带需求越来越高的3D加速卡， 这项技术变革成为了危机中Nvidia实现快速上升的一个通道。
　　1998年，Nvidia推出芯片代号为NV3的AGP 3D加速卡。
　　之后，Nvidia的Riva TNT、Riva TNT2及后续的各个高频版本成功拿下系列3D性能王冠，在多个领域打垮Voodoo3及ATI的Rage 128；当NV10于1999年8月推出时，Nvidia推出了“GPU”概念。
　　构建游戏画面渲染的模型是三角形。一般而言，渲染分两步走，第一步是决定三角形的顶点位置和颜色，这部分工作，以前都在CPU上进行；第二步，才是在显示芯片上决定三角形内部的所有点和颜色。
　　而Nvidia的第一个GPU——“NV10”(即GeForce256)已能把三角形顶点的渲染从CPU中解放，改由显示芯片做。
　　也正是从此时起，Nvidia在技术上开始酝酿多年后对传统CPU老大英特尔的威胁。
　　CUDA影响产业格局
　　每个公司的“前世”，都可能影响“今生”的一些重要战略。
　　如Nvidia第一个产品NV1欲自立标准的过于激进，影响了其上世纪90年代底改为支持微软标准的重要决策。其时，大部分GPU厂商都在使用OpenGL或自己的标准，而软件垄断者微软刚刚开始针对2D和3D推出标准──“DirectX”。
　　Nvidia最终选择支持微软，并在此后被证明是一个正确决策，但客观地说，这也为Nvidia作为技术先锋形象在本世纪初的严重受挫埋下了伏笔。
　　2000年，微软第一代XBOX开始采用Nvidia芯片 。很多人知道Nvidia的NV30是个有名的失败产品，但很少人知悉背后的更多内幕──据记者在硅谷的了解，除当时Nvidia几乎一半GPU工程师被派去做XBOX芯片外，另一原因即是微软与Nvidia关于XBOX芯片的价格争议。
　　当微软与Nvidia签下几年的协议时，并未考虑到硬件成本正飞速下降，所以协议为一次性价格。之后，微软希望修改协议，但遭到Nvidia拒绝。双方最终对簿公堂，关系也由此破坏。
　　因此，当微软发布“DirectX9.0”时，Nvidia未能像其它竞争对手一样参与其标准的规范制定，NV30的一些设计特性也由此未能在DX9上得到很好发挥。但经历种种磨难和考验后，已更为成熟、老道的Nvidia现在终于开始强势地在一个新领域推出自己标准——CUDA是人类GPU并行计算和高性能计算领域的第一个开发环境标准。
　　截至现在，CUDA已推出2.0版本，除已支持C和Fortran编程语言外，还将支持微软在Windows 7中将集成的DirectX Compute，及下一代苹果Mac OS操作系统(代号Leopard)内部集成的OpenCL；而“AMD+ATI”则还只是计划在未来的GPU内部加入对OpenCL和DirectX Compute的支持，目前，尚无任何具体的竞争产品。
　　不过，不容忽视的一个问题是， 在IT发展史上，独家推出的规范能延续的其实并不多见，而CUDA仍只是一个仅基于Nvidia自身GPU的技术架构，其它厂商如果要用，必须经过授权。
　　此外，CUDA还可以用到CPU上。也就是说，能让在CUDA下为GPU加速编译的程序在CPU上运行。
　　业界认为，CUDA是Nvidia开始向英特尔叫板的标志，但没人能准确预知此后CPU和GPU行业会如何调整变化，目前已可以显性看到的是，在Nvidia和ATI的步步紧逼下，英特尔也将在明年上半年推出GPU产品Larrabe，拟全面支持DirectX、OpenGL等现有API。


