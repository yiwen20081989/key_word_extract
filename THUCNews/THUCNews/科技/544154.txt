六省区断网追踪：被毒蛇咬中的细脖子
　　6月2日，来自公安部的消息称，4名引发“5·19网络瘫痪重大事故”的犯罪嫌疑人被捕。正是这4个人发起了对DNSpod域名解析服务器的攻击，最终引发了我国6省区互联网出现严重网络故障，大量网民无法正常访问网站。
　　这一幕与3年前国内大面积断网颇为相似。不同的是，后者是由于7.2级的大地震破坏了十几条国际海底通信光缆，而这一次，4名黑客点燃导火索之外，互联网上其他环节的脆弱也一同“作用”，共同酿成了这次大面积的网络瘫痪。
　　危险的链条
　　“5·19网络瘫痪重大事故”中，如果说黑客的攻击是点燃大火的火源，那安装有暴风影音的千万台电脑则成为使得火势越烧越猛的大风。那么，这家播放器软件是如何被利用成为这次网络故障的“帮凶”的呢？
　　一台电脑，如果想接入互联网，就需要发送“域名请求”。李峰(化名)是IT行业的资深人士，他告诉记者，“机器〉域名请求〉机器设置的DNS服务器〉DNS服务器〉INTERNIC〉域名解析服务器，这是一个域名请求的全过程。”
　　在这个过程中，一般用户设置的DNS服务器都是本省电信的服务器。所谓的DNS就是Domain Name Server(域名服务器)，INTERNIC是国际域名管理机构，而最后一个环节的域名解析服务器就是将用户的域名请求转化为对应的IP地址。
　　李峰告诉记者，正是由于一般人很难将由枯燥的数字组成的IP地址记住，记域名相对简单很多。因此需要域名解析服务器将域名转换为IP。如，用户需要访问www.sina.com.cn(新浪网)，DNS服务器的作用就是将它解析成IP(218.30.108.183)。
　　在“5·19网络瘫痪重大事故”中，受到黑客攻击的DNSPod就是处于域名请求链条上最后一端的域名解析服务器。“DNSPod无法提供服务，也就意味着网民输入由其进行解析的域名将无法登陆，但如果直接进行地址访问的则不受影响。”李峰如是说。
　　DNSPod是国内最大的免费智能DNS提供商。拥有16台服务器、近30万家网站借助其来解析域名，包括暴风影音、VeryCd等知名网站。
　　如果事情仅仅如此，那也只是这30万家网站无法用域名方式登陆而已。
　　“DNSPod.com受攻击只是本次网络瘫痪的第一个骨牌。”中国互联网络信息中心(CNNIC)副主任兼总工程师李晓东博士告诉记者，此次故障的起源点在于DNSPod.com被人恶意大流量攻击，承担DNSPod.com网络接入的电信运营商断掉了其网络服务。
　　由于DNSPod网络服务被中断，致使其无法为包括baofeng.com在内的域名提供域名解析服务，诸多采用DNSPod服务的网站无法用域名方式访问。这些大大小小的网站或网络服务(包括暴风影音在内)同时成为此次网络故障的第二张骨牌。
　　域名解析服务器出现故障后，所有的请求都积压在DNS服务器上，短时间内访问量过大相当于变相的DoS(Denial of Service，即拒绝服务)攻击，造成DoS的攻击行为被称为DoS攻击，最终引发电信的“拒绝服务”。
　　在导致网络瘫痪的巨量域名解析诉求中，暴风影音占据的流量居然高达40%。
　　受害者还是“帮凶”？
　　李晓东表示，安装了暴风影音软件的用户电脑产生的巨量域名请求，拥塞了为这些用户提供服务的各地电信运营商的本地域名服务器，导致多个省份的本地域名服务器出现故障甚至无法提供正常服务，第三个骨牌就此岌岌可危乃至最终倒掉。
　　第三张骨牌是互联网服务的关键环节。电信运营商的本地域名服务器出现拥塞甚至无法服务后，使用这些本地域名服务器的其他互联网用户也无法上网，进而导致更大范围内的用户申报网络故障。
　　5月20日，工业和信息化部发出通报：正是由于暴风影音客户端软件存在缺陷，导致安装该软件的上网终端在域名授权服务器工作异常的情况下，频繁发起域名解析请求，引发中国电信DNS服务器拥塞。并对暴风影音提出了整改要求。
　　然而，暴风影音认为自己也是受害者。该公司市场总监夏济告诉记者：“此次事件给暴风影音造成的直接经济损失达到238万元人民币。当然，我们也在客观上扩大了这个事件的影响。但这不是因为我们软件有漏洞，而是每个安装暴风影音的用户在开机后就会自动运行这个程序，以进行联网升级和下载广告。”
　　正是由于“自动运行”，这次的网络瘫痪才被进一步放大了。因为，通常情况下，如果是网民在地址栏输入“baofeng.com”等托管域名无法访问，网民就不会再次输入相关域名请求解析。但本次网络瘫痪中，发起请求的不仅是网民，更多的是安装网民电脑中的暴风影音软件，它不像人是有智慧的，在访问不成功后会自动放弃，程序的设计导致其无法访问时会持续不断发起访问请求。
　　而且这些请求全部拥塞在本地域名服务器中，无法转送到DNSPod完成baofeng.com解析，大量拥塞的请求占用了大量的服务器处理性能，进而导致本地域名服务器无法对其他的正常请求进行解析，并最终酿成大规模的网络故障。
　　事实上，会自动发起域名请求的软件，并非没有解决之道。李峰告诉记者，通常那些软件公司会将自动域名请求“重试”的间隔进行修改，一般都会超过5秒。“这是初级程序员都应该知道的。”
　　而未经修改的间隔是以毫秒级计算的。夏济告诉记者，此前暴风影音发送的频率是一分钟100多次，但在5月29日，暴风影音已经宣布修改了此前自动域名请求的频率，每分钟请求数量是原来的20%。6月19日，有关自动域名请求还将有一个更新的版本：网络正常的情况下，联网请求量是原来的20%，而当DNS解析失效等的极端情况下，只是原来的6%。
　　李晓东指出，从本次网络故障发生的过程来看，相关机构对域名系统的重要性认识不足，重视程度显然不够，安全保障能力比较低。一方面，提供公共域名服务的机构应提高自身安全防御和抗攻击能力；另一方面，拥有大量用户的互联网软件也应审慎考虑，优化软件安全性，避免一不小心成了分布式拒绝服务攻击(DoS攻击)的帮凶。
　　就怕流氓有文化
    在“5·19网络瘫痪重大事故”，可能点燃“导火索”的黑客都未曾预料到，攻击DNSpod域名解析服务器会产生如此恶劣的后果，最终酿成大范围的网络瘫痪。
    至于这四人为什么要攻击DNSpod，业界流传的说法是：由两家私服的江湖恩怨引起。这场江湖恩仇起先不过是两家“绿林帮会”黑吃黑。其中一家在没法干掉对手的情况下，一怒之下干脆从对方域名下手，对DNSpod服务器进行了狂轰滥炸。
    所谓私服，即未经版权拥有者授权，非法获得服务器端安装程序之后设立的网络服务器，其实就是盗版的网络游戏，分流运营商的利润。
    自从2002年10月，红极一时的网络游戏《传奇》的服务器源代码在韩国遭泄露，“私服”便进入人们的视野，至今已经形成了一个庞大的产业。
    “出事了就找私服顶缸”，这使一位曾经从事过私服行业的人士很不屑。“这和私服没有太大关系，谁也没有想到暴风的软件写的那么烂呀！不过私服之间的恩怨我不了解，也有可能出于利益关系火拼。”上述人士指出。
    事实上，网络安全不仅有可能被私服之间的互相攻击影响。中国互联网络信息中心(CNNIC)副主任兼总工程师李晓东博士指出，域名系统是一种公开服务，历来是被攻击的对象，完整的域名系统由递归域名服务系统(即本地域名服务器)、根域名服务系统、顶级域名服务系统以及各级域名服务系统等四个层级构成。每个环节都可能成为黑客攻击的对象。
　　“通常而言，黑客攻击或出于炫耀技术，或受人指使旨在实施不正当竞争，而后者通常是商业利益驱使的结果。”李晓东说。
　　黑客之所以成为黑客，首先是出于对技术的热爱；其次就是自身的一些窥私欲，一些年纪很轻就成为黑客的小孩经常会在成为黑客初期出于炫耀的目的“黑”掉一些网站。但这个群体正在摆脱散兵游勇的状态，以一种并不严密但却绝对保密的团体进行盈利活动。据了解，实际上目前黑客的数量，比前些年纯粹出于兴趣而研究技术的“黑客”要多了很多。不过顶尖的黑客，还是不多，大概平均每省3～4人左右，全国也就一百多人。　　据悉，黑客一般盗取QQ、游戏装备或者银行账户密码等网络信息，像上述私服那样为了打击竞争对手而“黑”掉对方的DNS域名解析服务器并不多见。


